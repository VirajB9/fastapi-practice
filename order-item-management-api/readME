Medium Coding Requirement 2
Order & OrderItem API (E-Commerce Core)
ğŸ¯ Tests
FKs Â· Cascades Â· Transactions Â· Service validation
---
ğŸ“Œ Problem Statement
Build an Order Management API using FastAPI + PostgreSQL.
---
ğŸ“‚ Required Structure
project/
â”‚â”€â”€ main.py
â”‚â”€â”€ routes/
â”‚   â”œâ”€â”€ order_route.py
â”‚   â””â”€â”€ item_route.py
â”‚â”€â”€ services/
â”‚   â”œâ”€â”€ order_service.py
â”‚   â””â”€â”€ item_service.py
â”‚â”€â”€ sql/
â”‚   â”œâ”€â”€ database.py
â”‚   â”œâ”€â”€ models.py
â”‚   â””â”€â”€ crud.py
---
ğŸ§± Data Models
Order

Field	Type

id	int (PK)
customer_name	string
status	string ("open", "closed")
---
OrderItem

Field	Type

id	int (PK)
product_name	string
quantity	int
order_id	FK â†’ orders.id

---
ğŸ” Relationships
One Order â†’ Many OrderItems
Cascade delete enabled

---
ğŸ§  Business Rules
1ï¸âƒ£ Items can be added only when
order.status == "open"
2ï¸âƒ£ Closing an Order prevents:
adding items
deleting items
3ï¸âƒ£ Deleting an Order deletes all OrderItems

---
ğŸ› ï¸ Required APIs

Order
POST /orders
GET  /orders
PATCH /orders/{id}/close
DELETE /orders/{id}

OrderItem
POST /items
DELETE /items/{id}

---
âŒ Disallowed
Status checks in CRUD
Skipping validations
Hardcoding IDs